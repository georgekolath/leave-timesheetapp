{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Downloads\\\\timehseet-leaveapp\\\\timehseet-leaveapp\\\\leave-timesheet-app\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Timesheet from './components/Timesheet';\nimport Leave from './components/Leave';\nimport AlertPopup from './components/AlertPopup';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [activeApp, setActiveApp] = useState('timesheet'); // 'timesheet' or 'leave'\n  const [showLeave, setShowLeave] = useState(false);\n  const [alertInfo, setAlertInfo] = useState(null);\n  const [alertDisabled, setAlertDisabled] = useState(false);\n  const alertTimerRef = React.useRef(null);\n  const [leaveDate, setLeaveDate] = useState(null);\n  const [compOffData, setCompOffData] = useState({});\n  const handleAlertYes = () => {\n    // Convert day name to valid yyyy-MM-dd date for Leave\n    const dayName = alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.date;\n    if (dayName) {\n      // Find the date for the current week for the given day name\n      const today = new Date();\n      const weekDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      const dayIndex = weekDays.indexOf(dayName);\n      // Get Monday of current week\n      const monday = new Date(today);\n      monday.setDate(today.getDate() - (today.getDay() + 6) % 7);\n      // Calculate the date for the selected day\n      const targetDate = new Date(monday);\n      targetDate.setDate(monday.getDate() + dayIndex);\n      const yyyyMMdd = targetDate.toISOString().slice(0, 10);\n      setLeaveDate(yyyyMMdd);\n    } else {\n      setLeaveDate(null);\n    }\n    setActiveApp('leave');\n    setAlertInfo(null);\n  };\n  const handleAlertNo = () => {\n    // Close popup and disable alert for 10 seconds\n    setAlertInfo(null);\n    setAlertDisabled(true);\n    if (alertTimerRef.current) clearTimeout(alertTimerRef.current);\n    alertTimerRef.current = setTimeout(() => {\n      setAlertDisabled(false);\n    }, 10000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar navbar-expand-lg navbar-light bg-light mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"navbar-brand\",\n          children: \"Management System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navbar-nav\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link btn btn-link${activeApp === 'timesheet' ? ' active' : ''}`,\n            onClick: () => setActiveApp('timesheet'),\n            children: \"Timesheet Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `nav-link btn btn-link${activeApp === 'leave' ? ' active' : ''}`,\n            onClick: () => setActiveApp('leave'),\n            children: \"Leave Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), activeApp === 'timesheet' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Timesheet, {\n        setAlertInfo: info => {\n          if (!alertDisabled) setAlertInfo(info);\n        },\n        compOffData: compOffData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), showLeave && /*#__PURE__*/_jsxDEV(Leave, {\n        date: leaveDate,\n        onLeaveApplied: () => setShowLeave(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 25\n      }, this), alertInfo && !showLeave && !alertDisabled && /*#__PURE__*/_jsxDEV(AlertPopup, {\n        date: alertInfo.date,\n        onNo: handleAlertNo,\n        onYes: handleAlertYes,\n        onClose: () => setAlertInfo(null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), activeApp === 'leave' && /*#__PURE__*/_jsxDEV(Leave, {\n      date: leaveDate,\n      onLeaveApplied: (fromDate, toDate) => {\n        // Only update compOffData, do not touch billable/nonBillable\n        const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n        let start = new Date(fromDate + 'T00:00:00');\n        let end = new Date(toDate + 'T00:00:00');\n        let d = new Date(start);\n        setCompOffData(prev => {\n          const newCompOff = {\n            ...prev\n          };\n          while (d <= end) {\n            let jsDay = d.getDay();\n            let dayName = daysOfWeek[jsDay === 0 ? 6 : jsDay - 1];\n            newCompOff[dayName] = 8;\n            newCompOff[d.toISOString().slice(0, 10)] = 8;\n            d.setDate(d.getDate() + 1);\n          }\n          return newCompOff;\n        });\n        setActiveApp('timesheet');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"J8+MQKbeSGOFrHEfRCV4d9pEQ5k=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Timesheet","Leave","AlertPopup","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","activeApp","setActiveApp","showLeave","setShowLeave","alertInfo","setAlertInfo","alertDisabled","setAlertDisabled","alertTimerRef","useRef","leaveDate","setLeaveDate","compOffData","setCompOffData","handleAlertYes","dayName","date","today","Date","weekDays","dayIndex","indexOf","monday","setDate","getDate","getDay","targetDate","yyyyMMdd","toISOString","slice","handleAlertNo","current","clearTimeout","setTimeout","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","info","onLeaveApplied","onNo","onYes","onClose","fromDate","toDate","daysOfWeek","start","end","d","prev","newCompOff","jsDay","_c","$RefreshReg$"],"sources":["C:/Users/admin/Downloads/timehseet-leaveapp/timehseet-leaveapp/leave-timesheet-app/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Timesheet from './components/Timesheet';\r\nimport Leave from './components/Leave';\r\nimport AlertPopup from './components/AlertPopup';\r\n\r\nfunction App() {\r\n  const [activeApp, setActiveApp] = useState('timesheet'); // 'timesheet' or 'leave'\r\n  const [showLeave, setShowLeave] = useState(false);\r\n  const [alertInfo, setAlertInfo] = useState(null);\r\n  const [alertDisabled, setAlertDisabled] = useState(false);\r\n  const alertTimerRef = React.useRef(null);\r\n\r\n  const [leaveDate, setLeaveDate] = useState(null);\r\n  const [compOffData, setCompOffData] = useState({});\r\n\r\n  const handleAlertYes = () => {\r\n    // Convert day name to valid yyyy-MM-dd date for Leave\r\n    const dayName = alertInfo?.date;\r\n    if (dayName) {\r\n      // Find the date for the current week for the given day name\r\n      const today = new Date();\r\n      const weekDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n      const dayIndex = weekDays.indexOf(dayName);\r\n      // Get Monday of current week\r\n      const monday = new Date(today);\r\n      monday.setDate(today.getDate() - ((today.getDay() + 6) % 7));\r\n      // Calculate the date for the selected day\r\n      const targetDate = new Date(monday);\r\n      targetDate.setDate(monday.getDate() + dayIndex);\r\n      const yyyyMMdd = targetDate.toISOString().slice(0, 10);\r\n      setLeaveDate(yyyyMMdd);\r\n    } else {\r\n      setLeaveDate(null);\r\n    }\r\n    setActiveApp('leave');\r\n    setAlertInfo(null);\r\n  };\r\n\r\n  const handleAlertNo = () => {\r\n    // Close popup and disable alert for 10 seconds\r\n    setAlertInfo(null);\r\n    setAlertDisabled(true);\r\n    if (alertTimerRef.current) clearTimeout(alertTimerRef.current);\r\n    alertTimerRef.current = setTimeout(() => {\r\n      setAlertDisabled(false);\r\n    }, 10000);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light mb-4\">\r\n        <div className=\"container-fluid\">\r\n          <span className=\"navbar-brand\">Management System</span>\r\n          <div className=\"navbar-nav\">\r\n            <button className={`nav-link btn btn-link${activeApp === 'timesheet' ? ' active' : ''}`} onClick={() => setActiveApp('timesheet')}>Timesheet Management</button>\r\n            <button className={`nav-link btn btn-link${activeApp === 'leave' ? ' active' : ''}`} onClick={() => setActiveApp('leave')}>Leave Management</button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      {activeApp === 'timesheet' && (\r\n        <>\r\n          <Timesheet setAlertInfo={info => {\r\n            if (!alertDisabled) setAlertInfo(info);\r\n          }} compOffData={compOffData} />\r\n          {showLeave && <Leave date={leaveDate} onLeaveApplied={() => setShowLeave(false)} />}\r\n          {alertInfo && !showLeave && !alertDisabled && (\r\n          <AlertPopup\r\n            date={alertInfo.date}\r\n            onNo={handleAlertNo}\r\n            onYes={handleAlertYes}\r\n            onClose={() => setAlertInfo(null)}\r\n          />\r\n          )}\r\n        </>\r\n      )}\r\n      {activeApp === 'leave' && (\r\n        <Leave\r\n          date={leaveDate}\r\n          onLeaveApplied={(fromDate, toDate) => {\r\n            // Only update compOffData, do not touch billable/nonBillable\r\n            const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\n            let start = new Date(fromDate + 'T00:00:00');\r\n            let end = new Date(toDate + 'T00:00:00');\r\n            let d = new Date(start);\r\n            setCompOffData(prev => {\r\n              const newCompOff = { ...prev };\r\n              while (d <= end) {\r\n                let jsDay = d.getDay();\r\n                let dayName = daysOfWeek[jsDay === 0 ? 6 : jsDay - 1];\r\n                newCompOff[dayName] = 8;\r\n                newCompOff[d.toISOString().slice(0,10)] = 8;\r\n                d.setDate(d.getDate() + 1);\r\n              }\r\n              return newCompOff;\r\n            });\r\n            setActiveApp('timesheet');\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}